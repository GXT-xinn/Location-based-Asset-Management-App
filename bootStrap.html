<DOCTYPE html>
  <html lang="en">
  <head>
  <!-- the following links add the CSS and Javascript required for the Leaflet Map -->
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
 integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
 crossorigin=""/>
 <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
 integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
 crossorigin=""></script>
  <!-- import the D3 script file-->
  <script src="https://d3js.org/d3.v5.min.js"></script>
  
 <script src="js/menu.js"></script>
 <script src="js/trackLocation.js"></script>
 <script src="js/basicMap.js"></script>
 <script src="js/centennial.js"></script>
 <script src="js/graph.js"></script>
 
    <!-- Use correct character set. -->
    <meta charset="utf-8">

    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


    <!-- custom fonts and styles for the bootstrap template -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" type="text/css" rel="stylesheet"> 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"  crossorigin="anonymous">

    <link href="css/sb-admin-2.css" type="text/css" rel="stylesheet">


    <title>Bootstrap Simplified Template</title>
    <!-- adapted from: https://blackrockdigital.github.io/startbootstrap-sb-admin-2/ -->

<!-- the following CSS is used to set the size of the Map -->
 <style type="text/css">
 #mapContainer { height: 100%; }
 </style>

  </head>
  <body id="page-top">
    <div id="wrapper">

      <!-- Sidebar -->
      <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

        <!-- Sidebar - Brand -->
        <a class="sidebar-brand d-flex align-items-center justify-content-center" >
          <div class="sidebar-brand-text mx-1">GitHub: GXT-xinn UCL: ucesxg3</div>
        </a>

        <!-- Divider -->
        <hr class="sidebar-divider">
        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item d-none d-lg-block" >
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="" onclick="menu1()";" aria-expanded="true" aria-controls="collapseOne">
            <!-- the next line is the cog image -->
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 1</span>
          </a>

        </li>


        <!-- Divider -->
        <hr class="sidebar-divider">
        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item d-lg-none" >
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 2</span>
          </a>
          <div id="collapseThree" class="collapse navbar-collapse" aria-labelledby="headingThree" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu3()">Menu 3</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu4()">Menu 4</a>
            </div>
          </div>
        </li>

        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item">
          <a class="nav-link collapsed"  data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 5</span>
          </a>
          <div id="collapseTwo" class="collapse navbar-collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <h6 class="collapse-header">Menu 6</h6>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" onclick="menu7()">Menu 7</a>
            </div>
          </div>
        </li>


        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item">
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 8</span>
          </a>
          <div id="collapseFour" class="collapse navbar-collapse" aria-labelledby="headingFour" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
             <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu9()">Menu 9</a>          

             <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu10()">Menu 10</a>          
			 </div>
          </div>
		</li>
		   
		   
		<!-- Divider -->
		<hr class="sidebar-divider">
		<!-- Nav Item - Pages Collapse Menu -->
		<li class="nav-item d-none d-md-block" >
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 11</span>
          </a>
          <div id="collapseFive" class="collapse navbar-collapse" aria-labelledby="collapseFive" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu12()">Menu 12</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu13()">Menu 13</a>
            </div>
          </div>
        </li>
		
		<!-- Nav Item - Pages Collapse Menu -->
		<li class="nav-item d-md-none" >
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseSix" aria-expanded="true" aria-controls="collapseSix">
            <i class="fas fa-fw fa-cog"></i>
            <span>Menu 14</span>
          </a>
          <div id="collapseSix" class="collapse navbar-collapse" aria-labelledby="collapseSix" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu15()">Menu 15</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="menu16()">Menu 16</a>
            </div>
          </div>
        </li>
		
        <!-- Divider -->
		<hr class="sidebar-divider">
		<!-- Nav Item - Pages Collapse Menu -->
		<li class="nav-item d-md-none">
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseSeven" aria-expanded="true" aria-controls="collapseSeven">
            <i class="fas fa-fw fa-cog"></i>
            <span>Tracking</span>
          </a>
          <div id="collapseSeven" class="collapse navbar-collapse" aria-labelledby="collapseSeven" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="trackLocation()">Switch tracking on</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removePositionPoints()">Switch tracking off</a>
            </div>
          </div>
        </li>
		
		
		<!-- Nav Item - Pages Collapse Menu -->
		<li class="nav-item d-none d-lg-block" >
          <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseEight" aria-expanded="true" aria-controls="collapseEight">
            <i class="fas fa-fw fa-cog"></i>
            <span>Centennial</span>
          </a>
          <div id="collapseEight" class="collapse navbar-collapse" aria-labelledby="collapseEight" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="getBuildings()">Load buildings</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removeBuildings()">Remove buildings</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="getEthernet()">Load ethernet cables</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removeEthernet()">Remove ethernet cables</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="getRooms()">Load rooms</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removeRooms()">Remove rooms</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="getSensors()">Load sensors</a>
			  <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removeSensors()">Remove sensors</a>
            </div>
          </div>
        </li>
		
		
		<!-- Nav Item - Pages Collapse Menu -->
		<li class="nav-item d-none d-md-block" >
		  <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseNine" aria-expanded="true" aria-controls="collapseNine">
            <i class="fas fa-fw fa-cog"></i>
            <span>Graphs</span>
          </a>
          <div id="collapseNine" class="collapse navbar-collapse" aria-labelledby="collapseNine" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="getBuildings()"> Show Graph</a>
              <a class="collapse-item"  data-toggle="collapse" data-target=".navbar-collapse.show" href="#" onclick="removeBuildings()"> Remove Graph</a>
			 </div>
          </div>
        </li>
		
		

       </ul>
       <!-- End of Sidebar -->
	   

	   
	
  <!-- the mapid div will hold the map -->
       <div id="content-wrapper" class="d-flex flex-column">
        <div id="mapContainer" style="z-index:0;"></div>
      </div>
	  
	<!-- the graph div will hold the graph for earthquake data-->
	  	<div id="graphWrapper" class="h-75 w-75 d-flex flex-column"
		style="background-color: white; display: inlineblock;position:absolute; top:-9999;left:15%;"><button type="button"
		class="close" aria-label="Close" onclick="closeGraph();"></div>
      <!-- End of Main Content -->
    </div>
    <!-- end of wrapper -->

  </body>
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>  
  
  <!-- Bootstrap core JavaScript-->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <script src="js/sb-admin-2.js"></script>



<script>
const svg     = d3.select("svg1"),
      margin  = {top: 20, right: 20, bottom: 30, left: 50},
      width   = +svg.attr("width")  - margin.left - margin.right,
      height  = +svg.attr("height") - margin.top  - margin.bottom,
      x       = d3.scaleBand().rangeRound([0, width]).padding(0.2),
      y       = d3.scaleLinear().rangeRound([height, 0]),
      g       = svg.append("g")
                   .attr("transform", `translate(${margin.left},${margin.top})`);

d3.json("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson").then(data => {
  data = data.features;
  console.log(data);
  x.domain(data.map(d => d.properties.place));
  y.domain([0, d3.max(data, d => d.properties.mag)]);

  g.append("g")
      .attr("class", "axis axis-x")
      .attr("transform", `translate(0,${height})`)
      .call(d3.axisBottom(x));


  g.append("g")
      .attr("class", "axis axis-y")
      .call(d3.axisLeft(y).ticks(10).tickSize(8));

  g.selectAll(".bar")
    .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", d => x(d.properties.place))
      .attr("y", d => y(d.properties.mag))
      .attr("width", x.bandwidth())
      .attr("height", d => height - y(d.properties.mag));
})
.catch(err => {
  svg.append("text")         
        .attr("y", 20)
        .attr("text-anchor", "left")  
        .style("font-size", "20px") 
        .style("font-weight", "bold")  
        .text(`Couldn't open the data file: "${err}".`);
});
document.addEventListener('DOMContentLoaded', function() {
  console.log("listener domcontentloaded");
  loadMap();
}, false);

</script>

  </html>
